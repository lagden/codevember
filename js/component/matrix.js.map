{"version":3,"sources":["../../../dev/es6/component/matrix.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,aAAY,CAAC;;;;;;;;;;AAMb,KAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;AACjD,KAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;AAC3B,KAAM,MAAM,GAAG,EAAE,CAAC;AAClB,KAAI,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;;AAEtC,UAAS,MAAM,GAAG;AACjB,MAAM,KAAK,GAAG,MAAM,CAAC,gBAAgB,IAAI,CAAC,CAAC;AAC3C,QAAM,CAAC,KAAK,IAAI,KAAK,CAAC;AACtB,QAAM,CAAC,MAAM,IAAI,KAAK,CAAC;AACvB,SAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;EAClC;;AAED,UAAS,MAAM,GAAG;AACjB,SAAO,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;AACxC,SAAO,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC;AAC1C,QAAM,EAAE,CAAC;EACT;;AAED,UAAS,GAAG,GAAG;AACd,MAAM,CAAC,GAAG,sBAAU,OAAO,CAAC,CAAC;AAC7B,QAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;EACf;;AAED,UAAS,MAAM,GAAG;AACjB,SAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AACrE,SAAO,CAAC,IAAI,EAAE,CAAC;AACf,MAAI,CAAC,YAAA,CAAC;;;;;;AACN,wBAAU,MAAM,8HAAE;AAAb,KAAC;;AACL,KAAC,CAAC,IAAI,EAAE,CAAC;AACT,QAAI,CAAC,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AAC3B,SAAM,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AAC9B,SAAI,GAAG,GAAG,CAAC,CAAC,EAAE;AACb,YAAM,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;MACtB;KACD;IACD;;;;;;;;;;;;;;;EACD;;AAED,KAAM,GAAG,GAAG,EAAE,CAAC;AACf,UAAS,IAAI,GAAG;AACf,MAAI,wBAAO,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE;AACtB,MAAG,EAAE,CAAC;GACN;AACD,YAAU,CAAC,YAAM;AAChB,SAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;AACnC,SAAM,EAAE,CAAC;GACT,EAAE,IAAI,GAAG,GAAG,CAAC,CAAC;EACf;;AAED,UAAS,IAAI,GAAG;AACf,QAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;AAC1C,QAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;AACtC,QAAM,EAAE,CAAC;AACT,MAAI,EAAE,CAAC;EACP;;;AAGD,KAAM,aAAa,GAAG;AACrB,QAAM,EAAE;AACP,WAAQ,EAAE,CAAC,MAAM,CAAC;GAClB;AACD,QAAM,EAAE,IAAI;EACZ,CAAC;AACF,qBAAQ,IAAI,CAAC,aAAa,CAAC,CAAC","file":"matrix.js","sourcesContent":["'use strict';\n\nimport random from 'component/rnd';\nimport webFont from 'webfontloader/webfontloader';\nimport Trail from 'component/trail';\n\nconst matrix = document.querySelector('#matrix');\nconst body = document.body;\nconst trails = [];\nlet context = matrix.getContext('2d');\n\nfunction retina() {\n\tconst ratio = window.devicePixelRatio || 1;\n\tmatrix.width *= ratio;\n\tmatrix.height *= ratio;\n\tcontext = matrix.getContext('2d');\n}\n\nfunction resize() {\n\tcontext.canvas.width = body.clientWidth;\n\tcontext.canvas.height = body.clientHeight;\n\tretina();\n}\n\nfunction add() {\n\tconst t = new Trail(context);\n\ttrails.push(t);\n}\n\nfunction update() {\n\tcontext.clearRect(0, 0, context.canvas.width, context.canvas.height);\n\tcontext.save();\n\tlet t;\n\tfor (t of trails) {\n\t\tt.draw();\n\t\tif (t.letters.length === 0) {\n\t\t\tconst idx = trails.indexOf(t);\n\t\t\tif (idx > -1) {\n\t\t\t\ttrails.splice(idx, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst fps = 15;\nfunction loop() {\n\tif (random(1, 10) % 2) {\n\t\tadd();\n\t}\n\tsetTimeout(() => {\n\t\twindow.requestAnimationFrame(loop);\n\t\tupdate();\n\t}, 1000 / fps);\n}\n\nfunction init() {\n\twindow.addEventListener('resize', resize);\n\tmatrix.addEventListener('click', add);\n\tresize();\n\tloop();\n}\n\n// Webfont\nconst webFontConfig = {\n\tcustom: {\n\t\tfamilies: ['SG07']\n\t},\n\tactive: init\n};\nwebFont.load(webFontConfig);\n"]}